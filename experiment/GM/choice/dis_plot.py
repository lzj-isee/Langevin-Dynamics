import numpy as np
import matplotlib.pyplot as plt


def plot_fig(samples,name):
    Ys=np.load('./ref.npy')
    Xs=np.linspace(-6,6,len(Ys))
    plt.figure(figsize=(6.4,6.4))
    ax1=plt.subplot2grid((15,15),(0,4),rowspan=11,colspan=11)
    ax1.hist2d(samples[:,0],samples[:,1],bins=60,range=[[-6,6],[-6,6]],cmap='Reds')
    ax2=plt.subplot2grid((15,15),(0,0),rowspan=11,colspan=3)
    ax2.hist(samples[:,1],bins=60,range=[-6,6], orientation='horizontal',density=True)
    ax2.plot(Ys[:,1],Xs,color='r')
    plt.ylim((-6,6))
    ax3=plt.subplot2grid((15,15),(12,4),rowspan=3,colspan=11)
    ax3.hist(samples[:,0],bins=60,range=[-6,6], orientation='vertical',density=True,label=name)
    ax3.plot(Xs,Ys[:,0],color='r',label='ref')
    plt.xlim((-6,6))
    plt.legend(bbox_to_anchor=(-0.12,0.7))

sgld=np.load('./choice/SGLD seed[2020]setting[0.8,0,0.08].npy')
sg_ul_mcmc=np.load('./choice/SG_UL_MCMC seed[2020,2020]setting[0.10,0,0.05].npy')
sghmc=np.load('./choice/SGHMC seed[2020]setting[1.2,0,0.05].npy')
svrg_ld=np.load('./choice/SVRG_LD seed[2020,2020]setting[0.7,0,0.01].npy')
srvr_hmc=np.load('./choice/SRVR_HMC seed[2020,2020]setting[0.07,0,0.00].npy')
srm_hmc=np.load('./choice/SRM_HMC seed[2020,2020]setting[0.08,0,0.05].npy')
nsrm_hmc=np.load('./choice/NSRM_HMC seed[2020,2020]setting[0.06,0,0.01]interval[100].npy')

plot_fig(sgld,'SGLD')
plt.savefig("./choice/SGLD.eps", format='eps', dpi=2000)
plt.close()
plot_fig(sghmc,'SGHMC')
plt.savefig("./choice/SGHMC.eps", format='eps', dpi=2000)
plt.close()
plot_fig(svrg_ld,'SVRG_LD')
plt.savefig("./choice/SVRG_LD.eps", format='eps', dpi=2000)
plt.close()
plot_fig(sg_ul_mcmc,'SG_UL_MCMC')
plt.savefig("./choice/SG_UL_MCMC.eps", format='eps', dpi=2000)
plt.close()
plot_fig(srvr_hmc,'SRVR_HMC')
plt.savefig("./choice/SRVR_HMC.eps", format='eps', dpi=2000)
plt.close()
plot_fig(srm_hmc,'SRM_HMC')
plt.savefig("./choice/SRM_HMC.eps", format='eps', dpi=2000)
plt.close()
plot_fig(nsrm_hmc,'NSRM_HMC')
plt.savefig("./choice/NSRM_HMC.eps", format='eps', dpi=2000)
plt.close()